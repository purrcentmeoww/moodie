# Moodie App API Documentation (‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)

> **‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:** 2 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏° 2568  
> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: README ‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÇ‡∏ä‡∏ß‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å endpoint ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏•‡∏∂‡∏Å‡∏ñ‡∏∂‡∏á data flow ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö

---

## üîñ Contents

- [‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#summary)
- [Base URL](#base-url)
- [‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô Error & Status Code](#errors)
- [User / Authentication API](#user-api)
- [Empathy Wall API](#empathy-wall-api)
    - [Posts](#post-api)
    - [Comments](#comment-api)
- [Time Capsule API](#capsule-api)
- [Calendar API](#calendar-api)
- [‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥/‡πÅ‡∏ô‡∏ß‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠](#advice)
---

<a name="summary"></a>
## üìç ‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

- **Backend:** Node.js (Express.js)
- **Database:** MySQL (‡∏£‡∏±‡∏ô‡∏ö‡∏ô Docker)
- **Data Format:** JSON ‡∏ï‡∏•‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö
- **Communication:** RESTful (GET, POST, DELETE)
- **Authentication:** ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏â‡∏û‡∏≤‡∏∞ username ‡πÅ‡∏•‡∏∞ userId (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏á‡πà‡∏≤‡∏¢ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏° Auth Token ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°)
- **Use Case:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ community ‡∏£‡πà‡∏ß‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å (Empathy Wall), Time Capsule ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß, ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå (Calendar Entry) ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏ä‡πà‡∏ß‡∏¢‡∏î‡∏π‡πÅ‡∏•‡πÉ‡∏à, ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤

---

<a name="base-url"></a>
## üåê Base URL (‡∏£‡∏±‡∏ô‡∏ö‡∏ô localhost)

http://localhost:4000/  


---

<a name="errors"></a>
## üö¶ ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô Error & Status Code

| Code         | ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢                  | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î                   |
|--------------|-----------------------------|--------------------------------------|
| 200 OK       | ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GET/DELETE) | -                                    |
| 201 Created  | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (POST)     | POST ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à                |
| 400 Bad Request | ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏¥‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö    | ‡∏Ç‡∏≤‡∏î‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå userId, username ‡∏ß‡πà‡∏≤‡∏á  |
| 403 Forbidden | ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£             | ‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå/‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô           |
| 404 Not Found | ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£           | postId/commentId ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö         |
| 500 Internal Server Error | ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏ù‡∏±‡πà‡∏á backend | -                                    |

---

<a name="user-api"></a>
## üë§ User API ‚Äî ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

> ‡∏™‡∏£‡πâ‡∏≤‡∏á user ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ user ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

**Endpoint:**  
`POST /api/users/login`

### Request

{
"username": "Somsak"
}

- ‡πÉ‡∏ä‡πâ username ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô (unique ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ password (demo purpose!)

### Response

- **‡∏ñ‡πâ‡∏≤ user ‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏à‡∏≠‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö**:  
    `200 OK`
    ```
    {
      "id": 1,
      "username": "Somsak",
      "created_at": "2025-08-02T10:00:00.000Z"
    }
    ```
- **‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô user ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà**:  
    `201 Created`
    ```
    {
      "id": 5,
      "username": "Somsak",
      "created_at": "2025-08-02T14:00:00.000Z"
    }
    ```
- **‡∏ñ‡πâ‡∏≤ username ‡∏ß‡πà‡∏≤‡∏á**  
    `400 Bad Request`
    ```
    { "error": "Username is required" }
    ```

### Data Flow (‡∏•‡∏∂‡∏Å)
- ‡∏£‡∏±‡∏ö `username` ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ‡πÉ‡∏ô db ‚Üí  
    - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ user ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö user info (‡∏û‡∏£‡πâ‡∏≠‡∏° log USER_LOGIN)
    - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠ ‡∏™‡∏£‡πâ‡∏≤‡∏á user ‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏™‡πà‡∏á info (‡πÅ‡∏•‡∏∞ log USER_REGISTER)
- ‡∏ô‡∏≥ user id ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô 1) ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö endpoint ‡∏≠‡∏∑‡πà‡∏ô‡∏ï‡πà‡∏≠

---

<a name="empathy-wall-api"></a>
## üß° Empathy Wall API

<a name="post-api"></a>
### 1.1 ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (GET)

**Endpoint:**  
`GET /api/posts`

- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå

**Response:**
[
{
"id": 15,
"user_id": 2,
"text_content": "‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏û‡∏™‡∏ï‡πå",
"hearts": 0,
"created_at": "2025-08-02T10:30:00.000Z",
"username": "Suda",
"comment_count": 5
}
]

**‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á:**  
‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏∂‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå + join username ‡∏à‡∏≤‡∏Å user + subquery ‡∏ô‡∏±‡∏ö comment ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
**‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏ß‡πå‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏•‡∏ô‡πå/‡∏´‡∏ô‡πâ‡∏≤ feed ‡∏´‡∏•‡∏±‡∏Å**

---

### 1.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà (POST)

**Endpoint:**  
`POST /api/posts`

**Request**
{
"text": "‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!",
"userId": 1
}

- `text`: ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÇ‡∏û‡∏™‡∏ï‡πå, `userId`: id user ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å /login

**Response** (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)  
`201 Created`
{
"message": "Post created!",
"postId": 16
}

**‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç**  
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‚Üí `400 Bad Request`
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡πà‡∏á `postId` ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ

---

### 1.3 ‡∏•‡∏ö‡πÇ‡∏û‡∏™‡∏ï‡πå (DELETE)

**Endpoint:**  
`DELETE /api/posts/:postId`
- `:postId` = id ‡∏Ç‡∏≠‡∏á‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏ô url
- **‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡πÉ‡∏ô body**:  
{ "userId": 1 }

**Response:**
- `200 OK` (‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)
- `403 Forbidden` (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á)
- `404 Not Found` (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏ô‡∏µ‡πâ)
- `400 Bad Request` (‡∏Ç‡∏≤‡∏î userId)

---

<a name="comment-api"></a>
### 2.1 ‡∏î‡∏∂‡∏á‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå (GET)

**Endpoint:**  
`GET /api/posts/:postId/comments`
- `:postId` ‡πÉ‡∏™‡πà‡πÉ‡∏ô URL

**Response:**  
[
{
"id": 101,
"post_id": 15,
"text_content": "‡∏™‡∏π‡πâ‡πÜ‡∏ô‡∏∞",
"created_at": "2025-08-02T10:31:00.000Z",
"user_id": 1,
"username": "Somsak"
}
]


---

### 2.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÉ‡∏ô‡πÇ‡∏û‡∏™‡∏ï‡πå (POST)

**Endpoint:**  
`POST /api/posts/:postId/comments`

**Request**
{
"text": "‡πÄ‡∏´‡πá‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!",
"userId": 2
}

**Response:**  
`201 Created`
{
"message": "Comment created!",
"commentId": 103
}

**‡∏Ç‡∏≤‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏î‡∏Ñ‡πà‡∏≤‡∏ô‡∏∂‡∏á error**

---

### 2.3 ‡∏•‡∏ö‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå (DELETE)

**Endpoint:**  
`DELETE /api/comments/:commentId`

**Request**
{
"userId": 2
}

**Response:**  
`200 OK`
{ "message": "Comment deleted successfully" }

*‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô, ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö userId ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á*

---

<a name="capsule-api"></a>
## ‚úâÔ∏è Time Capsule API

### 3.1 ‡∏î‡∏∂‡∏á‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (GET)

**Endpoint:**  
`GET /api/users/:userId/capsules`

**Response:**
[
{
"id": 1,
"user_id": 1,
"text_content": "‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡∏â‡∏±‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï...",
"past_analysis": "{"primary":"happy","breakdown":{}}",
"open_date": "2026-08-02T00:00:00.000Z",
"created_at": "2025-08-02T10:15:00.000Z"
}
]

**‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏î‡∏π time capsule ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á**

---

### 3.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏Ñ‡∏õ‡∏ã‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà (POST)

**Endpoint:**  
`POST /api/capsules`

**Request**
{
"userId": 1,
"text": "‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏ï‡∏≠‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡∏ô‡∏∞",
"openDate": "2026-08-02T10:20:00.000Z",
"pastAnalysis": {
"primary": "hopeful",
"breakdown": { "hopeful": 0.9, "neutral": 0.1 }
}
}

- `openDate` format: ISO (UTC)

**Response:**  
`201 Created`
{
"message": "Time capsule created!",
"capsuleId": 2
}

---

<a name="calendar-api"></a>
## üìÖ Calendar API (Diary/Mood Log)

### 4.1 ‡∏î‡∏∂‡∏á diary ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (GET)

**Endpoint:**  
`GET /api/users/:userId/calendar-entries`

**Response:**
[
{
"id": 1,
"user_id": 2,
"entry_date": "2024-06-20",
"text_content": "‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏°‡∏≤‡∏Å!",
"mood": "happy",
"created_at": "2024-06-20T12:35:00.000Z"
}
]

---

### 4.2 ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï diary (POST)

**Endpoint:**  
`POST /api/calendar-entries`

**Request**
{
"userId": 2,
"date": "2024-07-01",
"text": "‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏®‡∏£‡πâ‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢",
"mood": "sad"
}

- ‡∏ß‡∏±‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡πÑ‡∏î‡πâ 1 entry/user (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ update ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)

**Response:**  
`200 OK`
{ "message": "Entry saved successfully" }


---

<a name="advice"></a>
## ‚ÑπÔ∏è ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏£‡∏∞‡∏ö‡∏ö ‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÅ‡∏•‡∏∞ Data Flow

- **userId**: Handshake ‡∏£‡∏±‡∏ö‡∏°‡∏≤‡∏à‡∏≤‡∏Å `/api/users/login` ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£ call ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á userId ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
- **postId, commentId, capsuleId, etc.**: ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏Ñ‡∏•‡∏¥‡∏Å‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ, web ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å endpoint ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö/‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô body**: POST/DELETE ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ JSON ‡πÉ‡∏ô body ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏° set header `Content-Type: application/json`
- **‡∏£‡∏∞‡∏ö‡∏ö Auth**: ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏¢‡∏∂‡∏î‡∏ö‡∏≤‡∏á endpoint ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á userId ‡πÅ‡∏ö‡∏ö plain text! ‡πÉ‡∏ô Production Stack ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ JWT ‡∏´‡∏£‡∏∑‡∏≠ Auth Token ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏™‡∏°‡∏≠

---

## üí° ‡∏™‡∏£‡∏∏‡∏õ Workflow ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ API)

1. Login (‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏°‡∏±‡∏Ñ‡∏£) ‚Üí `/api/users/login`
2. ‡∏î‡∏∂‡∏á post timeline ‚Üí `/api/posts`  
   ‡∏™‡∏£‡πâ‡∏≤‡∏á post ‚Üí `/api/posts`
   ‡∏•‡∏ö post ‚Üí `/api/posts/:postId` (body: userId)
3. comment post ‚Üí `/api/posts/:postId/comments`
   ‡∏•‡∏ö comment ‚Üí `/api/comments/:commentId`
4. ‡∏™‡∏£‡πâ‡∏≤‡∏á capsule ‚Üí `/api/capsules`
   ‡∏î‡∏π capsule ‚Üí `/api/users/:userId/capsules`
5. ‡∏à‡∏î diary/mood ‚Üí `/api/calendar-entries`
   ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ diary/mood ‚Üí `/api/users/:userId/calendar-entries`

---

## üéØ Tips - ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô/‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

- ‡∏ó‡∏∏‡∏Å endpoint ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö parameter ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏´‡∏≤‡∏Å‡∏Ç‡∏≤‡∏î‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö error 400/403/404 ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- format ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ (Date-Times) ‡πÉ‡∏ä‡πâ ISO 8601 ‡πÄ‡∏™‡∏°‡∏≠ (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ moment.js ‡∏´‡∏£‡∏∑‡∏≠ dayjs ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö front-end)
- ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Response/Request ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á  
- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î error ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô field `"error"` ‡∏Ç‡∏≠‡∏á response

---
